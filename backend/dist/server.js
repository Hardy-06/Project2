"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var listening_on_1 = require("listening-on");
var express_1 = __importDefault(require("express"));
var knex_1 = require("./knex");
// import { HttpError } from "./http.error";
var user_service_1 = require("./user/user.service");
var user_controller_1 = require("./user/user.controller");
var cors_1 = __importDefault(require("cors"));
var member_routes_1 = require("./myshop/member.routes");
var article_1 = require("./article/article");
var mycollection_controller_1 = require("./myCollections/mycollection.controller");
var mycollection_service_1 = require("./myCollections/mycollection.service");
var mybooking_controller_1 = require("./myBooking/mybooking.controller");
var mybooking_service_1 = require("./myBooking/mybooking.service");
var mypackage_controller_1 = require("./myPackage/mypackage.controller");
var mypackage_service_1 = require("./myPackage/mypackage.service");
var productPic_routes_1 = require("./myshop/productPic.routes");
var myshop_routes_1 = require("./myshop/myshop.routes");
var myshopplan_routes_1 = require("./myshop/myshopplan.routes");
var product_service_1 = require("./product/product.service");
var product_controller_1 = require("./product/product.controller");
var shop_routes_1 = require("./shop/shop.routes");
var Notification_service_1 = require("./notification/Notification.service");
var Notification_controller_1 = require("./notification/Notification.controller");
var app = (0, express_1.default)();
app.use((0, cors_1.default)());
app.use(express_1.default.static("public"));
app.use(express_1.default.static("uploads-sample"));
app.use("/uploads", express_1.default.static("uploads-sample"));
app.use("/uploads", express_1.default.static("uploads"));
app.use(express_1.default.json());
app.use(express_1.default.urlencoded({ extended: false }));
var userService = new user_service_1.UserService(knex_1.knex);
var userController = new user_controller_1.UserController(userService);
app.use(userController.router);
app.use(member_routes_1.memberRouter);
app.use(article_1.articleRoute);
app.use(productPic_routes_1.productPicRouter);
app.use(myshop_routes_1.myShopRouter);
app.use(myshopplan_routes_1.myshopplanRouter);
app.use(shop_routes_1.shopRouter);
var mycollectionService = new mycollection_service_1.MycollectionService(knex_1.knex);
var mycollectionController = new mycollection_controller_1.MycollectionController(mycollectionService);
app.use(mycollectionController.router);
var productService = new product_service_1.ProductService(knex_1.knex);
var productController = new product_controller_1.ProductController(productService);
app.use(productController.router);
var mybookingService = new mybooking_service_1.MybookingService(knex_1.knex);
var mybookingController = new mybooking_controller_1.MybookingController(mybookingService);
app.use(mybookingController.router);
var mypackageService = new mypackage_service_1.MypackageService(knex_1.knex);
var mypackageController = new mypackage_controller_1.MypackageController(mypackageService);
app.use(mypackageController.router);
app.use(myshopplan_routes_1.myshopplanRouter);
var notificationService = new Notification_service_1.NotificationService(knex_1.knex);
var notificationController = new Notification_controller_1.NotificationController(notificationService);
app.use(notificationController.router);
app.use(function (error, req, res, next) {
    // console.log(error);
    res.status(error.statusCode || 500);
    res.json({ error: String(error) });
});
var port = 8100;
app.listen(port, function () {
    (0, listening_on_1.print)(port);
});
//# sourceMappingURL=server.js.map